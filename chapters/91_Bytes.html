
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Bytes Data Type &#8212; Python Security</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/justify.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/analytics_gtag.js"></script>
    <script src="../_static/analytics.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://elc.github.com/python-security/chapters/91_Bytes.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Base64 Encoding" href="92_Base64.html" />
    <link rel="prev" title="Additional Resources" href="80_Additional_Resources.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Python Security</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_Fundamentals.html">
                    Introduction to Security
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Hashes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_Hash_Introduction.html">
   Hash Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_Salt.html">
   Salt
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_Pepper.html">
   Pepper
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_Checksum.html">
   Checksum
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_HMAC.html">
   HMAC
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Encryption
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="06_Symmetric_Encryption.html">
   Symmetric Encryption
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_Asymmetric_Encryption.html">
   Asymmetric Encryption
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Threats
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="08_Input_Sanitization.html">
   Input Sanitization - Under Construction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09_Common_Threats.html">
   Common Threats - Under Construction
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Applications
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="10_JSON_Web_Tokens.html">
   JSON Web Tokens (JWT)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="19_Blockchain.html">
   BlockChain - Under Construction
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Additional Material
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="80_Additional_Resources.html">
   Additional Resources
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Bytes Data Type
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="92_Base64.html">
   Base64 Encoding
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/ELC/python-security/source?urlpath=tree/chapters/91_Bytes.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/ELC/python-security/blob/source/chapters/91_Bytes.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/ELC/python-security"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/ELC/python-security/edit/source/chapters/91_Bytes.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapters/91_Bytes.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-conversions">
   Data Conversions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-binascii-module">
     Using the
     <code class="docutils literal notranslate">
      <span class="pre">
       binascii
      </span>
     </code>
     module
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-plain-strings">
     Example with plain strings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-custom-objects">
     Example with Custom objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-mixins">
     Example with Mixins
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-case-files">
   Special Case: Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-bytes">
   Random Bytes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-secrets-module">
     Using the
     <code class="docutils literal notranslate">
      <span class="pre">
       secrets
      </span>
     </code>
     module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-secrets">
     Comparing Secrets
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Bytes Data Type</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-conversions">
   Data Conversions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-binascii-module">
     Using the
     <code class="docutils literal notranslate">
      <span class="pre">
       binascii
      </span>
     </code>
     module
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-plain-strings">
     Example with plain strings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-custom-objects">
     Example with Custom objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-with-mixins">
     Example with Mixins
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-case-files">
   Special Case: Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-bytes">
   Random Bytes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-secrets-module">
     Using the
     <code class="docutils literal notranslate">
      <span class="pre">
       secrets
      </span>
     </code>
     module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparing-secrets">
     Comparing Secrets
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="bytes-data-type">
<h1>Bytes Data Type<a class="headerlink" href="#bytes-data-type" title="Permalink to this headline">#</a></h1>
<p><strong>ToDo</strong>:</p>
<ul class="simple">
<li><p>Add an illustration and explain the concept of UTF-8, Unicode, Bytes, ASCII - Similar to <a class="reference external" href="https://blog.finxter.com/wp-content/uploads/2020/06/byte-1024x576.jpg">this</a></p></li>
<li><p>Add relevant resources at the end</p></li>
</ul>
<hr class="docutils" />
<p>Most cryptographic functions require <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes-objects">Bytes</a> objects. In the case of strings, the <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.encode"><code class="docutils literal notranslate"><span class="pre">encode</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes.decode"><code class="docutils literal notranslate"><span class="pre">decode</span></code></a> methods can be used, however for custom objects, two possible ways are:</p>
<ol class="simple">
<li><p>Converting the object to JSON and then convert the JSON string to bytes</p></li>
<li><p>Implementing a <code class="docutils literal notranslate"><span class="pre">__bytes__</span></code> method</p></li>
</ol>
<p>However, usually hashes are used with plain types like strings which are easily convertible to bytes.</p>
<section id="data-conversions">
<h2>Data Conversions<a class="headerlink" href="#data-conversions" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>data_string = &quot;Hello World!&quot;
data_bytes = data_string.encode(&quot;utf-8&quot;)
data_hex = data_bytes.hex()
data_decoded = data_bytes.decode(&quot;utf-8&quot;)
data_hex_bytes = bytes.fromhex(data_hex)

print(f&quot;     Original String: {data_string}&quot;)
print(f&quot;From String to Bytes: {data_bytes}&quot;)
print(f&quot;   From Bytes to Hex: {data_hex}&quot;)
print(f&quot;From Bytes to String: {data_decoded}&quot;)
print(f&quot;   From Hex to Bytes: {data_hex_bytes}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     Original String: Hello World!
From String to Bytes: b&#39;Hello World!&#39;
   From Bytes to Hex: 48656c6c6f20576f726c6421
From Bytes to String: Hello World!
   From Hex to Bytes: b&#39;Hello World!&#39;
</pre></div>
</div>
</div>
</div>
<section id="using-the-binascii-module">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">binascii</span></code> module<a class="headerlink" href="#using-the-binascii-module" title="Permalink to this headline">#</a></h3>
<p>The <a class="reference external" href="https://docs.python.org/3/library/binascii.html">binascii module</a> exposes two utility functions, one to convert from bytes to hex called <a class="reference external" href="https://docs.python.org/3/library/binascii.html#binascii.hexlify">hexlify</a> and another to do the reverse conversion called <a class="reference external" href="https://docs.python.org/3/library/binascii.html#binascii.unhexlify">unhexlify</a></p>
<p><strong>Important note:</strong> the hexlify function returns a bytes object whereas the .hex() method of bytes returns a string. See the <code class="docutils literal notranslate"><span class="pre">b</span></code> before the <code class="docutils literal notranslate"><span class="pre">'</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import binascii

data_string = &quot;Hello World!&quot;
data_bytes = data_string.encode(&quot;utf-8&quot;)
data_hex = binascii.hexlify(data_bytes)
data_hex_string = binascii.unhexlify(data_hex)

print(f&quot;     Original String: {data_string}&quot;)
print(f&quot;From String to Bytes: {data_bytes}&quot;)
print(f&quot;   From Bytes to Hex: {data_hex}&quot;)
print(f&quot;   From Hex to Bytes: {data_hex_bytes}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     Original String: Hello World!
From String to Bytes: b&#39;Hello World!&#39;
   From Bytes to Hex: b&#39;48656c6c6f20576f726c6421&#39;
   From Hex to Bytes: b&#39;Hello World!&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import hashlib
</pre></div>
</div>
</div>
</div>
<section id="example-with-plain-strings">
<h3>Example with plain strings<a class="headerlink" href="#example-with-plain-strings" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>data = &quot;Hello World!&quot;
data_bytes = data.encode(&quot;utf-8&quot;)
data_decoded = data_bytes.decode(&quot;utf-8&quot;)
data_hashed = hashlib.sha256(data_bytes).hexdigest()
print(f&quot;Original: {data}&quot;)
print(f&quot; Encoded: {data_bytes}&quot;)
print(f&quot; Decoded: {data_decoded}&quot;)
print(f&quot;  Hashed: {data_hashed}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Original: Hello World!
 Encoded: b&#39;Hello World!&#39;
 Decoded: Hello World!
  Hashed: 7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200126d9069
</pre></div>
</div>
</div>
</div>
</section>
<section id="example-with-custom-objects">
<h3>Example with Custom objects<a class="headerlink" href="#example-with-custom-objects" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from dataclasses import dataclass, asdict
import json

@dataclass
class Person:
    first_name: str
    last_name: str
    
    @property
    def fullname(self):
        return f&quot;{self.last_name}, {self.first_name}&quot;
    
    def __bytes__(self):
        dictionary_representation = asdict(self)
        json_representation = json.dumps(dictionary_representation)
        return json_representation.encode(&quot;utf-8&quot;)
    
    @classmethod
    def from_bytes(cls, bytes_object):
        string_representation = bytes_object.decode(&quot;utf-8&quot;)
        dictionary_representation = json.loads(string_representation)
        return cls(**dictionary_representation)
    
person = Person(&quot;John&quot;, &quot;Doe&quot;)
person_bytes = bytes(person)
person_decoded = Person.from_bytes(person_bytes)
person_hashed = hashlib.sha256(person_bytes).hexdigest()

print(f&quot; Original: {person}&quot;)
print(f&quot;  Encoded: {person_bytes}&quot;)
print(f&quot;  Decoded: {person_decoded}&quot;)
print(f&quot;Full Name: {person_decoded.fullname}&quot;)
print(f&quot;   Hashed: {person_hashed}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Original: Person(first_name=&#39;John&#39;, last_name=&#39;Doe&#39;)
  Encoded: b&#39;{&quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Doe&quot;}&#39;
  Decoded: Person(first_name=&#39;John&#39;, last_name=&#39;Doe&#39;)
Full Name: Doe, John
   Hashed: fee485b19074e0b0b2856ae5f27fcdd67ff12204cbff73c5eaa10b1aac887042
</pre></div>
</div>
</div>
</div>
</section>
<section id="example-with-mixins">
<h3>Example with Mixins<a class="headerlink" href="#example-with-mixins" title="Permalink to this headline">#</a></h3>
<p>In bigger projects, it may be against best practice to duplicate the <code class="docutils literal notranslate"><span class="pre">__bytes__</span></code> and <code class="docutils literal notranslate"><span class="pre">from_bytes</span></code> methods. A <a class="reference external" href="https://en.wikipedia.org/wiki/Mixin?oldformat=true">Mixin</a> class can be used and then inherit from. Mixins are special class, similar to a <a class="reference external" href="https://www.python.org/dev/peps/pep-0544/">Protocol</a> which define methods to be used in child classes. Mixins as opposed to Interfaces or Abstract Classes are meant to be incomplete and it should not make sense to instanciate them directly.</p>
<p><strong>Note</strong>: In this case, it would have been possible to make <code class="docutils literal notranslate"><span class="pre">PersonBase</span></code> inherit from <code class="docutils literal notranslate"><span class="pre">ByteConvertibleMixin</span></code> and thus avoiding the multiple-inheritance. However, if the bytes conversion is desirable only to a subset of children classes of <code class="docutils literal notranslate"><span class="pre">PersonBase</span></code>, then the multiple-inheritance approach is the most idiomatic in Python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from abc import ABC
from dataclasses import dataclass, asdict
import json

@dataclass
class ByteConvertibleMixin(ABC):
    def __bytes__(self):
        dictionary_representation = asdict(self)
        json_representation = json.dumps(dictionary_representation)
        return json_representation.encode(&quot;utf-8&quot;)
    
    @classmethod
    def from_bytes(cls, bytes_object):
        string_representation = bytes_object.decode(&quot;utf-8&quot;)
        dictionary_representation = json.loads(string_representation)
        return cls(**dictionary_representation)

@dataclass
class PersonBase:  # Name changed to avoid overwriting
    first_name: str
    last_name: str
    
    @property
    def fullname(self):
        return f&quot;{self.last_name}, {self.first_name}&quot;
    
@dataclass
class Customer(PersonBase, ByteConvertibleMixin):  # Multiple-Inheritance
    address: str
    
customer = Customer(&quot;John&quot;, &quot;Doe&quot;, &quot;Neverland 10&quot;)
customer_bytes = bytes(customer)
customer_decoded = Customer.from_bytes(customer_bytes)
customer_hashed = hashlib.sha256(customer_bytes).hexdigest()

print(f&quot; Original: {customer}&quot;)
print(f&quot;  Encoded: {customer_bytes}&quot;)
print(f&quot;  Decoded: {customer_decoded}&quot;)
print(f&quot;Full Name: {customer_decoded.fullname}&quot;)
print(f&quot;   Hashed: {customer_hashed}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Original: Customer(first_name=&#39;John&#39;, last_name=&#39;Doe&#39;, address=&#39;Neverland 10&#39;)
  Encoded: b&#39;{&quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Doe&quot;, &quot;address&quot;: &quot;Neverland 10&quot;}&#39;
  Decoded: Customer(first_name=&#39;John&#39;, last_name=&#39;Doe&#39;, address=&#39;Neverland 10&#39;)
Full Name: Doe, John
   Hashed: 4a23851a4c1d84ccd1b5b9c520325436c162b823a998feceeb87f7fb107876bc
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="special-case-files">
<h2>Special Case: Files<a class="headerlink" href="#special-case-files" title="Permalink to this headline">#</a></h2>
<p>When working with files, it is possible to work in bytes format out of the box. The easiest way is through the <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.read_bytes"><code class="docutils literal notranslate"><span class="pre">read_bytes</span></code></a> method of the <a class="reference external" href="https://docs.python.org/3/library/pathlib.html"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a> module.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from pathlib import Path

image_bytes = Path(&quot;../_static/images/certificate_details_dns.png&quot;).read_bytes()
image_bytes = image_bytes[:150]  # Trimmed to improve display

print(f&quot;Byte Representation: \n{image_bytes}\n&quot;)
print(f&quot;Hex Representation: \n{image_bytes.hex()}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Byte Representation: 
b&#39;\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x04\xe1\x00\x00\x02\x0f\x08\x02\x00\x00\x00\xba\xd9]t\x00\x00\x00\x01sRGB\x00\xae\xce\x1c\xe9\x00\x00\x00\x04gAMA\x00\x00\xb1\x8f\x0b\xfca\x05\x00\x00\x00\tpHYs\x00\x00\x0e\xc3\x00\x00\x0e\xc3\x01\xc7o\xa8d\x00\x00\xb9}IDATx^\xed\xfd\x7f\xace\xc7u\xe7\x8b\xf5\xfb#x\xf93\xc8\x1f\x1e\xc0\x7f\xbdI\x10\xc0\x80\x9d\xf1\x1f\xf2C@\xe5\xe5\x0f\x033H\x9cA\x0c? \x99\x18\xcc@Q@\xe5\x8e\x07\x03\xd9\x83\x17@\x8e&#39;

Hex Representation: 
89504e470d0a1a0a0000000d49484452000004e10000020f0802000000bad95d74000000017352474200aece1ce90000000467414d410000b18f0bfc6105000000097048597300000ec300000ec301c76fa8640000b97d49444154785eedfd7fac65c775e78bf5fb2378f933c81f1ec07fbd4910c0809df11ff24340e5e50f0333489c410c3f209918cc405140e58e0703d98317408e
</pre></div>
</div>
</div>
</div>
</section>
<section id="random-bytes">
<h2>Random Bytes<a class="headerlink" href="#random-bytes" title="Permalink to this headline">#</a></h2>
<p>There are many ways to generate randomness or pseudo-randomness, some of which are considered <strong>insecured</strong> and other <strong>secure</strong>.</p>
<section id="using-the-secrets-module">
<h3>Using the <code class="docutils literal notranslate"><span class="pre">secrets</span></code> module<a class="headerlink" href="#using-the-secrets-module" title="Permalink to this headline">#</a></h3>
<p>Python 3.6 introduced the <a class="reference external" href="https://docs.python.org/3/library/secrets.html"><code class="docutils literal notranslate"><span class="pre">secrets</span></code></a> module to conveniently generate several types of <strong>secure</strong> random bytes.</p>
<p>The relevant methods are the <code class="docutils literal notranslate"><span class="pre">token_*</span></code> methods, each receives a lenght parameter. The more bytes, the safer the token, see <a class="reference external" href="https://docs.python.org/3/library/secrets.html#how-many-bytes-should-tokens-use">this resource</a> for more information. Moreover, this <a class="reference external" href="https://www.youtube.com/watch?v=S9JGmA5_unY">video</a> illustrates how secure 32 bytes (256bits) randomness is.</p>
<p>When using only hexadecimal, there will be 2 characters per byte, to generate shorter strings but at the same time being able to insert them in URL (e.g. for password reset tokens), the <code class="docutils literal notranslate"><span class="pre">token_urlsafe</span></code> can be used, which will yield a string approximately 25% shorter</p>
<p>There are other ways to generate random bytes in Python but using secrets is common practice since Python 3.6. For other options see this <a class="reference external" href="https://stackoverflow.com/questions/42190663/questions-about-python3-6-os-urandom-os-getrandom-secrets">detailed answer</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import secrets
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>lenght = 15

print(f&quot;              Secure Random Bytes: {secrets.token_bytes(lenght)}&quot;)
print(f&quot;        Secure Random Bytes (Hex): {secrets.token_hex(lenght)}&quot;)
print(f&quot;Secure Random Bytes (Hex URLSafe): {secrets.token_urlsafe(lenght)}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>              Secure Random Bytes: b&#39;;\x0f\xb4\xdb\xf6*O\xc6a|o\x92\xc3\x82{&#39;
        Secure Random Bytes (Hex): 99bf49794fa7411a0f472a459a8df2
Secure Random Bytes (Hex URLSafe): Vx25EMsEuVszsq995uQf
</pre></div>
</div>
</div>
</div>
</section>
<section id="comparing-secrets">
<h3>Comparing Secrets<a class="headerlink" href="#comparing-secrets" title="Permalink to this headline">#</a></h3>
<p>To avoid <a class="reference external" href="https://www.wikiwand.com/en/Timing_attack">timming attacks</a>, it is important to <strong>NOT</strong> use <code class="docutils literal notranslate"><span class="pre">==</span></code> when comparing secrets. For that the <code class="docutils literal notranslate"><span class="pre">secrets</span></code> module exposes a method <a class="reference external" href="https://docs.python.org/3/library/secrets.html#secrets.compare_digest"><code class="docutils literal notranslate"><span class="pre">compare_digest</span></code></a> which is actually an alias of the <a class="reference external" href="https://docs.python.org/3/library/hmac.htm"><code class="docutils literal notranslate"><span class="pre">hmac</span></code></a> module <a class="reference external" href="https://docs.python.org/3/library/hmac.html#hmac.compare_digest">homonymous method</a>.</p>
<p>For a demonstration of this type of attack, see this <a class="reference external" href="https://www.youtube.com/watch?v=XThL0LP3RjY">demo</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Excesively large lenght for better illustration
lenght = 1000
real_token = secrets.token_bytes(lenght)
guess_token_all_wrong = secrets.token_bytes(lenght)
guess_token_all_but_one = real_token[:-1] + secrets.token_bytes(1)

print(f&quot;Is short guess the real? {secrets.compare_digest(real_token, guess_token_all_wrong)}&quot;)
print(f&quot;Is long guess the real? {secrets.compare_digest(real_token, guess_token_all_but_one)}&quot;)
print(f&quot;Is real guess the real? {secrets.compare_digest(real_token, real_token)}&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Is short guess the real? False
Is long guess the real? False
Is real guess the real? True
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">#</a></h2>
<p>To avoid duplicated work, it is important to work with standards, in the case of security and encryption, that standard is the Bytes format. All methods and algorithms work with bytes objects and therefore it is important to know how to handle them while programming.</p>
<p>Python has several tools like <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">binascii</span></code> and <code class="docutils literal notranslate"><span class="pre">secrets</span></code> to work, generate and convert bytes. It is also possible to define conversion for custom objects through the <code class="docutils literal notranslate"><span class="pre">__bytes__</span></code> magic method. The <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> module also allows to read files as bytes out of the box.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ELC/python-security",
            ref: "source",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="80_Additional_Resources.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Additional Resources</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="92_Base64.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Base64 Encoding</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Ezequiel Leonardo Castaño<br/>
  
      &copy; Copyright 2021, Ezequiel Leonardo Castaño.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>